"use strict";

var EE = require("events").EventEmitter;

var P = require("utils/proto");

function apply(prop) {
	return function () {
		var ee = this.ee;

		if (!ee) {
			this.ee = ee = new EE();
		}

		ee[prop].apply(ee, arguments);
	};
}

module.exports = function (C) {
	var proto = C.prototype;

	proto.on = apply("on");
	proto.once = apply("once");
	proto.emit = apply("emit");

	P.apply(undefined, arguments);
};
