"use strict";

var EE = require("events").EventEmitter;

var proto = require("utils/proto");

function apply(prop) {
	return function () {
		var ee = this.ee;

		if (!ee) {
			this.ee = ee = new EE();
		}

		ee[prop].apply(ee, arguments);
	};
}

module.exports = function (C) {
	var p = C.prototype;

	p.on = apply("on");
	p.once = apply("once");
	p.emit = apply("emit");

	proto.apply(undefined, arguments);
};
